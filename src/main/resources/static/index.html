<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>部落冲突</title>
    <link rel="stylesheet" href="./common/css/common.css">
    <link rel="stylesheet" href="./common/bootstrap/bootstrap.min.css">
    <script src="./common/js/jquery-3.3.1.min.js"></script>
    <script src="./common/bootstrap/bootstrap.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function (){
            $(".back-to-top").click(function (){
                $('html, body').animate({
                    scrollTop: $("#top").offset().top
                }, 500);
            });
        });

        $(function () {
            create_players_table();
            create_clans_table();
        });

        function create_players_table() {
            $.ajax({
                url: "/createTable",
                data: "type=players",
                type: "GET",
                success: function (result) {
                    var res = $.parseJSON(result.data);
                    $.each(res.items, function (index, item) {
                        var rankTd = $("<td></td>").append(item.rank).addClass("col-sm-2");
                        var nameTd = $("<td></td>").append(item.name).addClass("col-sm-5");
                        var trophiesTd = $("<td></td>").append(item.trophies).addClass("col-sm-2");
                        if('clan' in item) {
                            var clanTd = $("<td></td>").append(item.clan.name).addClass("col-sm-3");
                        } else {
                            var clanTd = $("<td></td>").append("（暂无部落）").addClass("col-sm-3");
                        }


                        if (item.rank <= 10) {
                            $("<tr></tr>").append(rankTd).append(nameTd).append(trophiesTd).append(clanTd).addClass("row mx-0").appendTo("#players_table1 tbody");
                        } else {
                            $("<tr></tr>").append(rankTd).append(nameTd).append(trophiesTd).append(clanTd).addClass("row mx-0").appendTo("#players_table2 tbody");
                        }
                    });
                }
            });
        }

        function create_clans_table() {
            $.ajax({
                url: "/createTable",
                data: "type=clans",
                type: "GET",
                success: function (result) {
                    var res = $.parseJSON(result.data);
                    $.each(res.items, function (index, item) {
                        var rankTd = $("<td></td>").append(item.rank).addClass("col-sm-2");
                        var nameTd = $("<td></td>").append(item.name).addClass("col-sm-5");
                        var clanLevelTd = $("<td></td>").append(item.clanLevel).addClass("col-sm-2");
                        var clanPointsTd = $("<td></td>").append(item.clanPoints).addClass("col-sm-3");

                        if (item.rank <= 10) {
                            $("<tr></tr>").append(rankTd).append(nameTd).append(clanLevelTd).append(clanPointsTd).addClass("row mx-0").appendTo("#clans_table1 tbody");
                        } else {
                            $("<tr></tr>").append(rankTd).append(nameTd).append(clanLevelTd).append(clanPointsTd).addClass("row mx-0").appendTo("#clans_table2 tbody");
                        }
                    });
                }
            });
        }
    </script>
</head>

<body class="w-100">
    <div class="w-100">
        <!-- 导航栏 -->
        <div class="w-100" id="top">
                <div class="row">
                    <div class="col-md-12">
                        <nav class=" navbar navbar-expand-lg navbar-dark bg-dark">
                <a class="navbar-brand ml-3" href="./index.html"><img style="width: 80px;height: 40px;" src="./common/img/logo.png" /></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
                    aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarText">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">主页</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./players.html">查询玩家</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./clans.html">查询部落</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./making.html">广场</a>
                        </li>
                    </ul>
                    <span class="navbar-text">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="./making.html">登录</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="./making.html">注册</a>
                            </li>

                        </ul>
                    </span>
                </div>
            </nav>
                </div>
                </div>
        </div>

        <!-- 主要内容 -->
        <div class="w-100">
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="2000">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="d-block w-100" style="height: 550px" src="http://qnyw.pomo16.club/index_pic_1.png" alt="First slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" style="height: 550px" src="http://qnyw.pomo16.club/index_pic_2.png" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" style="height: 550px" src="http://qnyw.pomo16.club/index_pic_3.png" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" style="height: 550px" src="http://qnyw.pomo16.club/index_pic_4.png" alt="Fourth slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" style="height: 550px" src="http://qnyw.pomo16.club/index_pic_5.png" alt="Fifth slide">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="title">
                            <h2>中国顶级玩家Top 20</h2>
                        </div>
                    </div>
                </div>

                <!-- 中国顶级玩家 -->
                <div class="row">
                    <div class="col-md-6">
                        <div style="width: 90%;margin:auto;">
                            <div style="width:100%;text-align: center;height: 70px;">
                                <h4 style="line-height: 70px;">Top 1 ~ 10</h4>
                            </div>
                            <table class="table row mx-0" id="players_table1">
                                <thead class="thead-dark w-100">
                                    <tr class="row mx-0">
                                        <th class="col-2" scope="col">排名</th>
                                        <th class="col-5" scope="col">名称</th>
                                        <th class="col-2" scope="col">杯数</th>
                                        <th class="col-3" scope="col">部落</th>
                                    </tr>
                                </thead>
                                <tbody class="w-100">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div style="width: 90%;margin:auto;">
                            <div style="width:100%;text-align: center;height: 70px;">
                                <h4 style="line-height: 70px;">Top 10 ~ 20</h4>
                            </div>
                            <table class="table row mx-0" id="players_table2">
                                <thead class="thead-dark w-100">
                                    <tr class="row mx-0">
                                        <th class="col-2" scope="col">排名</th>
                                        <th class="col-5" scope="col">名称</th>
                                        <th class="col-2" scope="col">杯数</th>
                                        <th class="col-3" scope="col">部落</th>
                                    </tr>
                                </thead>
                                <tbody class="w-100">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
        
                <div class="row">
                    <div class="col-md-12">
                        <div class="title">
                            <h2>中国顶级部落Top 20</h2>
                        </div>
                    </div>
                </div>

                <!-- 中国顶级部落 -->
                <div class="row mb-md-5">
                    <div class="col-md-6">
                        <div style="width: 90%;margin:auto;">
                            <div style="width:100%;text-align: center;height: 70px;">
                                <h4 style="line-height: 70px;">Top 1 ~ 10</h4>
                            </div>
                            <table class="table row mx-0" id="clans_table1">
                                <thead class="thead-dark w-100">
                                    <tr class="row mx-0">
                                        <th class="col-2" scope="col">排名</th>
                                        <th class="col-5" scope="col">名称</th>
                                        <th class="col-2" scope="col">等级</th>
                                        <th class="col-3" scope="col">杯数</th>
                                    </tr>
                                </thead>
                                <tbody class="w-100">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div style="width: 90%;margin:auto;">
                            <div style="width:100%;text-align: center;height: 70px;">
                                <h4 style="line-height: 70px;">Top 10 ~ 20</h4>
                            </div>
                            <table class="table row mx-0" id="clans_table2">
                                <thead class="thead-dark w-100">
                                    <tr class="row mx-0">
                                        <th class="col-2" scope="col">排名</th>
                                        <th class="col-5" scope="col">名称</th>
                                        <th class="col-2" scope="col">等级</th>
                                        <th class="col-3" scope="col">杯数</th>
                                    </tr>
                                </thead>
                                <tbody class="w-100">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
        </div>

        <!-- 底部栏 -->
        <div class="w-100">
                <div class="row">
                    <div class="col-md-12">
                        <nav class="navbar navbar-expand-lg navbar-light bg-light">
                            <a class="navbar-brand back-to-top"><img style="margin-left: 20px;width: 80px;height: 40px;" src="./common/img/logo.png" /></a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
                                    aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarText">
                                <ul class="navbar-nav mr-auto">
                                    <li class="nav-item">
                                        <a class="nav-link back-to-top" style="cursor:default">回到顶部</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="https://supercell.com/en/games/clashofclans/" target="_blank">游戏官网</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="https://pomo16.github.io/about/" target="_blank">关于作者</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="https://developer.clashofclans.com" target="_blank">API</a>
                                    </li>
                                </ul>
                                <span class="navbar-text">
                                    <text class="mr-md-3">本站数据来源于Supercell官方API</text>
                                </span>
                            </div>
                        </nav>
                    </div>
            </div>
        </div>
    </div>
</body>

</html>