<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>æŸ¥è¯¢éƒ¨è½</title>
    <link rel="stylesheet" href="/common/css/common.css">
    <link rel="stylesheet" href="/common/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/common/fullpage/fullpage.css">
    <link rel="stylesheet" href="/common/fontawesome/css/all.min.css">
    <script src="/common/js/jquery-3.3.1.min.js"></script>
    <script src="/common/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="/common/fullpage/fullpage.js"></script>

    <style>
        .hh {display: inline;}
        .section{
            background-size: cover;
        }
        #section0{
            background-image: url(/common/img/background3.png);
        }
        #section0 h1{
            text-align:center;
            color: #353A3F;
            top: 50%;
            transform: translateY(-100%);
            position: relative;
        }
        #section1{
            background-image: url(/common/img/background2.png);
            padding: 6% 0 0 0;
            color: white;
        }
        .feature{
            display: table;
            width: 40%;
            height: 30%;
            vertical-align: middle;
            color: #fff;
            position: absolute;
            top: 40%;
            left: 30%;
        }
        .feature-inner {
            display: table-cell;
            vertical-align: middle;
            text-align: center;
        }
        .arrow {
            color:white;
            width: 20%;
            text-align:center;
            opacity:0.4;
        }
        .arrowDown {
            position: absolute;
            top: 75%;
            left: 40%;
        }
    </style>

    <script type="text/javascript">
        $(function(){
            $("#searchBt").click(function(){
                var id = $("#searchInput").val();
                var ajax = $.ajax({
                    url : "/test/json?name=test",
                    type : "GET",
                    //data : {id: id},
                    timeout:5000, //è¶…æ—¶æ—¶é—´
                    beforeSend:function(){
                        $("#searchBt").removeClass("btn-primary").addClass("btn-secondary").html("<i class='fa fa-spinner fa-pulse' style='cursor:no-drop'></i>"); //åœ¨åå°è¿”å›successä¹‹å‰æ˜¾ç¤ºloadingå›¾æ ‡
                    },
                    success : function(result) {
                        if (result == "false") {
                            alert("request failed");
                        } else {
                            reset();
                            var res = JSON.parse(result);
                            $("#name").text(res.name);
                            $("#clanLevel").text(" LV." + res.clanLevel);
                            $("#tag").text(res.tag.replace('%','#'));
                            $("#clanImg").html("<img style='height:70px;width:70px;' src='" + res.badgeUrls.small + "'/>");
                            $("#members").text(res.members + "/50");

                            $("#clanPoints").text("ğŸ†" + res.clanPoints);
                            $("#clanVersusPoints").text("ğŸ†" + res.clanVersusPoints);
                            $("#type").text(res.type);
                            $("#requiredTrophies").text("ğŸ†" + res.requiredTrophies);
                            $("#description").text(res.description);

                            $("#warFrequency").text(res.warFrequency);
                            $("#warWinStreak").text(res.warWinStreak);
                            $("#isWarLogPublic").text(res.isWarLogPublic);
                            $("#warWins").text(res.warWins);
                            $("#warTies").text(res.warTies);
                            $("#warLosses").text(res.warLosses);
                            fullpage_api.moveSectionDown();
                        }
                        $("#searchBt").removeClass("btn-secondary").addClass("btn-primary").text("æœç´¢");
                    },
                    fail : function() {
                        alert("è¯·æ±‚å¤±è´¥");
                        $("#searchBt").removeClass("btn-secondary").addClass("btn-primary").text("æœç´¢");
                    },
                    complete : function(XMLHttpRequest, status) { //è¯·æ±‚å®Œæˆåæœ€ç»ˆæ‰§è¡Œå‚æ•°
                        if (status == 'timeout') {//è¶…æ—¶,statusè¿˜æœ‰success,errorç­‰å€¼çš„æƒ…å†µ
                            ajax.abort();
                            $("#searchBt").removeClass("btn-secondary").addClass("btn-primary").text("æœç´¢");
                        }
                    }
                });
            });

            $("#arrowDownBt").click(function () {
                fullpage_api.moveSectionDown();
            });
        });

        function reset() {
            $("#name").text("");
            $("#clanLevel").text("");
            $("#tag").text("");
            $("#clanImg").html("");
            $("#members").text("");
            $("#clanPoints").text("");
            $("#clanVersusPoints").text("");
            $("#type").text("");
            $("#requiredTrophies").text("");
            $("#description").text("");
            $("#warFrequency").text("");
            $("#warWinStreak").text("");
            $("#warWins").text("");
            $("#isWarLogPublic").text("");
            $("#warTies").text("");
            $("#warLosses").text("");
        }

    </script>


</head>

<body>
    <div class="w-100">
        <!-- å¯¼èˆªæ  -->
        <div class="w-100">
            <div class="row">
                <div class="col-md-12">
                    <nav class=" navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
                        <a class="navbar-brand ml-3" href="/index"><img style="width: 80px;height: 40px;" src="/common/img/logo.png" /></a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
                                aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarText">
                            <ul class="navbar-nav mr-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="/index.html">ä¸»é¡µ</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/players.html">æŸ¥è¯¢ç©å®¶</a>
                                </li>
                                <li class="nav-item active">
                                    <a class="nav-link" href="#">æŸ¥è¯¢éƒ¨è½</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/making.html">å¹¿åœº</a>
                                </li>
                            </ul>
                            <span class="navbar-text">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="/making.html">ç™»å½•</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/making.html">æ³¨å†Œ</a>
                            </li>

                        </ul>
                    </span>
                        </div>
                    </nav>
                </div>
            </div>
        </div>

        <div id="fullpage">
            <!-- ç¬¬ä¸€é¡µ -->
            <div class="section " id="section0">
                <h1>æŸ¥è¯¢éƒ¨è½</h1>
                <div class="feature">
                    <div class="feature-inner">
                        <div class="input-group input-group-lg">
                            <input type="text" placeholder="Clans ID e.g.2LOU82P2" class="form-control input-lg">
                            <span class="btn-lg btn-primary input-group-addon input-group-btn" id="searchBt" style="cursor: pointer">æœç´¢</span>
                        </div>
                    </div>
                </div>
                <div class="arrow arrowDown" id="arrowDownBt">
                    <i class="fas fa-chevron-down fa-7x" style="cursor:pointer"></i>
                </div>
            </div>

            <!-- ç¬¬äºŒé¡µ -->
            <div class="section" id="section1">
                <div class="row">
                    <h1 class="col-12">&nbsp;</h1>
                </div>
                <div class="container">
                    <div class="row">
                        <h1 class="col-1" id="clanImg"></h1>
                        <h1 class="col-9" id="name">æš‚æ— éƒ¨è½ä¿¡æ¯ï¼Œè¯·è¿”å›ä¸Šä¸€é¡µæœç´¢</h1>
                        <h5 class="col-2 m-auto" id="tag"></h5>
                    </div>
                    <div class="row">
                        <h1 class="col-12">&nbsp;</h1>
                    </div>
                    <div class="row text-left">
                        <h4 class="col-2">ç­‰çº§</h4>
                        <h4 class="col-4" id="clanLevel"></h4>
                        <h4 class="col-2">éƒ¨è½æˆå‘˜</h4>
                        <h4 class="col-4" id="members"></h4>
                    </div>
                    <div class="row">
                        <h4 class="col-12"></h4>
                    </div>
                    <div class="row text-left">
                        <h4 class="col-2">ä¸»ä¸–ç•Œæ¯æ•°</h4>
                        <h4 class="col-4" id="clanPoints"></h4>
                        <h4 class="col-2">å¤œä¸–ç•Œæ¯æ•°</h4>
                        <h4 class="col-4" id="clanVersusPoints"></h4>
                    </div>
                    <div class="row">
                        <h4 class="col-12"></h4>
                    </div>
                    <div class="row text-left">
                        <h4 class="col-2">ç±»å‹</h4>
                        <h4 class="col-4" id="type"></h4>
                        <h4 class="col-2">æ‰€éœ€æ¯æ•°</h4>
                        <h4 class="col-4" id="requiredTrophies"></h4>
                    </div>
                    <div class="row">
                        <h4 class="col-12"></h4>
                    </div>
                    <div class="row text-left">
                        <h4 class="col-2">éƒ¨è½ç®€ä»‹</h4>
                        <h5 class="col-9" id="description"></h5>
                        <h4 class="col-1"></h4>
                    </div>

                    <div class="row">
                        <h1 class="col-12">&nbsp;</h1>
                    </div>
                    <div class="row text-left">
                        <h2 class="col-12">éƒ¨è½æˆ˜</h2>
                    </div>
                    <div class="row text-left">
                        <h4 class="col-2">é¢‘ç‡</h4>
                        <h4 class="col-2" id="warFrequency"></h4>
                        <h4 class="col-2">éƒ¨è½æˆ˜è¿èƒœ</h4>
                        <h4 class="col-2" id="warWinStreak"></h4>
                        <h4 class="col-2">å¯¹æˆ˜è®°å½•å…¬å¼€</h4>
                        <h4 class="col-2" id="isWarLogPublic"></h4>
                    </div>
                    <div class="row text-left">
                        <h4 class="col-2">éƒ¨è½æˆ˜èƒœå±€</h4>
                        <h4 class="col-2" id="warWins"></h4>
                        <h4 class="col-2">éƒ¨è½æˆ˜å¹³å±€</h4>
                        <h4 class="col-2" id="warTies"></h4>
                        <h4 class="col-2">éƒ¨è½æˆ˜è´¥å±€</h4>
                        <h4 class="col-2" id="warLosses"></h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        new fullpage('#fullpage', {
            verticalCentered: false
        });
    </script>
</body>

</html>

